import { Meta, Title, TableOfContents, Story } from '@storybook/addon-docs/blocks'
import * as EmptyStories from './Empty.stories.ts'
import changelogContent from '../../../../CHANGELOG.md?raw'
import { marked } from 'marked'
import { gfmHeadingId } from 'marked-gfm-heading-id'

<Meta title="Changelog" />

{(() => {
marked.use(gfmHeadingId())
})()}

<div className='sb-docs-wrapper' >
  <div className='sb-docs-content'>

    <Title>История изменений</Title>

    &nbsp;

    <div
      className='changelog'
      dangerouslySetInnerHTML={{__html: marked.parse(changelogContent)}}
    />

    <Story of={EmptyStories.Basic} />

  </div>

  <div>
    <TableOfContents
      className='sb-docs-toc sb-unstyled'
      title='Версии'
      contentsSelector='.changelog'
      headingSelector="h2"
      offsetTop="0"
      ignoreSelector='.sbdocs-subtitle'
    />
  </div>
</div>

<style>
  {`
  .changelog h1 {
    display: none;
  }
  .changelog h2:not(:first-of-type) {
    margin-top: 50px;
  }
`}
</style>
